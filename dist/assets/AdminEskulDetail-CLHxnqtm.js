import{r as u,d as _,j as a,z as o}from"./app-Db-aw5MQ.js";import{B as h}from"./button-CTj6SyfF.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./utils-NikRBbYi.js";const b=[{value:1,label:"Senin"},{value:2,label:"Selasa"},{value:3,label:"Rabu"},{value:4,label:"Kamis"},{value:5,label:"Jumat"},{value:6,label:"Sabtu"}];function N({eskul:t,onClose:m}){const n=e=>e?(e.schedules||e.jadwal_latihan||e.absensiEskul||e.absensi_eskul||[]).map(l=>({day_of_week:Number(l.day_of_week),jam_mulai:l.jam_mulai||"",jam_selesai:l.jam_selesai||""})):[];u.useEffect(()=>{console.log("Eskul diterima di modal:",t)},[t]);const{data:i,setData:d,patch:p,processing:x}=_({_method:"PATCH",nama:t?.nama||"",schedules:n(t)});u.useEffect(()=>{d({_method:"PATCH",nama:t?.nama||"",schedules:n(t)})},[t]);const f=e=>{i.schedules.some(l=>l.day_of_week===e)?d("schedules",i.schedules.filter(l=>l.day_of_week!==e)):d("schedules",[...i.schedules,{day_of_week:e,jam_mulai:"",jam_selesai:""}])},c=(e,s,l)=>{d("schedules",i.schedules.map(r=>r.day_of_week===e?{...r,[s]:l}:r))},j=e=>{e.preventDefault(),p(route("admin.eskul.update",t.id),{onSuccess:()=>{o.success("Berhasil memperbarui data eskul!"),m()},onError:()=>{o.error("Gagal memperbarui data. Periksa kembali input.")}})};return a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white border-2 border-purple-400 rounded-2xl shadow-xl w-full max-w-lg p-8",children:[a.jsx("h2",{className:"text-lg font-bold mb-4",children:"Edit Ekstrakurikuler"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium",children:"Nama Ekstrakurikuler"}),a.jsx("input",{type:"text",value:i.nama,onChange:e=>d("nama",e.target.value),className:"border rounded-md p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium",children:"Jadwal Latihan"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(e=>a.jsxs("label",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:i.schedules.some(s=>Number(s.day_of_week)===e.value),onChange:()=>f(e.value)}),e.label]},e.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium",children:"Waktu Latihan"}),i.schedules.length===0?a.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"Tidak ada jadwal latihan yang dipilih."}):i.schedules.map(e=>a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"w-20",children:b.find(s=>s.value===Number(e.day_of_week))?.label}),a.jsx("input",{type:"time",value:e.jam_mulai||"",onChange:s=>c(e.day_of_week,"jam_mulai",s.target.value),className:"border rounded-md p-2 w-28"}),a.jsx("span",{children:"-"}),a.jsx("input",{type:"time",value:e.jam_selesai||"",onChange:s=>c(e.day_of_week,"jam_selesai",s.target.value),className:"border rounded-md p-2 w-28"})]},e.day_of_week))]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(h,{type:"button",variant:"outline",onClick:m,className:"bg-white border border-gray-300 text-black w-28",children:"Batal"}),a.jsx(h,{type:"submit",disabled:x,className:"bg-purple-600 hover:bg-purple-700 text-white w-28",children:"Perbarui"})]})]})]})})}export{N as default};
