import{j as e,r as c,a as j}from"./app-Db-aw5MQ.js";import{B as x}from"./button-CTj6SyfF.js";import{I as B}from"./input-CTXf7KjN.js";import{S as F,a as $,b as z,c as A,d as k}from"./select-DUpPVQxL.js";import{c as b}from"./utils-NikRBbYi.js";import{F as H}from"./filter-VEGg2tVV.js";import{C as R}from"./chevron-left-DiC1_UpU.js";import{C as I}from"./chevron-right-DT_mBIMY.js";import{c as J}from"./createLucideIcon-BBcfScga.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./index-BEN4BbhH.js";import"./Combination-CeIkTSzD.js";import"./index-DKaELoCc.js";import"./index-DRPotTz5.js";import"./index-C_gZ3pLj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],T=J("FileDown",P);function q({className:s,...n}){return e.jsx("div",{"data-slot":"card",className:b("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...n})}function U({className:s,...n}){return e.jsx("div",{"data-slot":"card-content",className:b("px-6",s),...n})}const oe=()=>{const[s,n]=c.useState("monthly"),[t,v]=c.useState(new Date().getMonth()+1),[d,V]=c.useState(new Date().getFullYear()),[l,N]=c.useState(1),[w,S]=c.useState([]),[y,C]=c.useState(""),E=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],D=(a,i)=>{if(i===0)return"-";const o=a/i*100;return o<50?"Kurang":o>=50&&o<=60?"Cukup":o>=61&&o<=74?"Baik":"Sangat Baik"},K=async()=>{try{const[a,i,o]=await Promise.all([j.get("/api/laporan/sekolah",{params:{range:s,bulan:t,tahun:d,semester:l}}),j.get("/api/laporan/eskul",{params:{range:s,bulan:t,tahun:d,semester:l}}),j.get("/api/laporan/event",{params:{range:s,bulan:t,tahun:d,semester:l}})]),u=new Map,g=(h,m)=>{h.forEach(r=>{const f=r.nama||"-",p=u.get(f)||{nama:f,kelas:r.murid?.kelas?.name||r.keterangan||"-",keahlian:r.murid?.keahlian||r.keahlian||r.murid?.kejuruan||"-",hadirSekolah:0,hadirEskul:0,hadirEvent:0,keterangan:"-"};m==="sekolah"&&(p.hadirSekolah+=r.hadir||0),m==="eskul"&&(p.hadirEskul+=r.hadir||0),m==="event"&&(p.hadirEvent+=r.hadir||0),u.set(f,p)})};g(a.data,"sekolah"),g(i.data,"eskul"),g(o.data,"event");const L=Array.from(u.values()).map(h=>{const m=h.hadirSekolah+h.hadirEskul+h.hadirEvent,r=m+2;return{...h,keterangan:D(m,r)}});S(L)}catch(a){console.error("Error fetching laporan:",a)}};c.useEffect(()=>{K()},[s,t,d,l]);const M=w.filter(a=>a.nama.toLowerCase().includes(y.toLowerCase()));return e.jsxs("div",{className:"flex bg-gray-100 min-h-screen text-gray-900",children:[e.jsx("aside",{className:"w-56 bg-white h-screen p-4 shadow",children:e.jsxs("nav",{className:"space-y-2 text-sm",children:[e.jsx("div",{onClick:()=>window.location.href="/Admin/Dashboard",className:"p-2 rounded bg-[#E86D1F] font-medium cursor-pointer text-white",children:"ðŸ  Dashboard"}),e.jsx("div",{onClick:()=>window.location.href="/Admin/UserManagement",className:"p-2 rounded hover:bg-gray-200 cursor-pointer",children:"ðŸ‘¥ User Manajemen"}),e.jsx("div",{onClick:()=>window.location.href="/admin/events",className:"p-2 rounded hover:bg-gray-200 cursor-pointer",children:"ðŸ“… Event Manajemen"}),e.jsx("div",{className:"p-2 rounded hover:bg-gray-200 cursor-pointer",onClick:()=>window.location.href="/admin/eskul",children:"âš½ Ekstrakurikuler"}),e.jsx("div",{className:"p-2 rounded hover:bg-gray-200 cursor-pointer",onClick:()=>window.location.href="/admin/riwayat-kehadiran",children:"ðŸ“ˆ Riwayat Kehadiran"}),e.jsx("div",{className:"p-2 rounded hover:bg-gray-200 cursor-pointer",onClick:()=>window.location.href="/admin/statistik-kehadiran",children:"ðŸ“ˆ Statistik Kehadiran"}),e.jsx("div",{className:"p-2 rounded hover:bg-gray-200 cursor-pointer",onClick:()=>window.location.href="/admin/laporan-kehadiran",children:"ðŸ“„ Laporan"})]})}),e.jsxs("main",{className:"flex-1 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Laporan Kehadiran"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Admin"})]})]}),e.jsx(q,{className:"border-2 border-purple-300 rounded-2xl bg-white shadow-sm",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Filter"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:s==="weekly"?"default":"outline",className:`rounded-full ${s==="weekly"?"bg-purple-600 text-white":""}`,onClick:()=>n("weekly"),children:"Mingguan"}),e.jsx(x,{variant:s==="monthly"?"default":"outline",className:`rounded-full ${s==="monthly"?"bg-purple-600 text-white":""}`,onClick:()=>n("monthly"),children:"Bulanan"}),e.jsx(x,{variant:s==="semester"?"default":"outline",className:`rounded-full ${s==="semester"?"bg-purple-600 text-white":""}`,onClick:()=>n("semester"),children:"Semester"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{children:[e.jsx($,{className:"w-40",children:e.jsx(z,{placeholder:"Semua Keahlian"})}),e.jsxs(A,{children:[e.jsx(k,{value:"all",children:"Semua Keahlian"}),e.jsx(k,{value:"rpl",children:"RPL"}),e.jsx(k,{value:"tkj",children:"TKJ"})]})]}),e.jsx(B,{placeholder:"Cari nama...",className:"w-44",value:y,onChange:a=>C(a.target.value)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-gray-900",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{s==="semester"?N(l-1):v(t===1?12:t-1)},children:e.jsx(R,{size:18})}),e.jsx("span",{className:"font-semibold",children:s==="semester"?`Semester ${l} ${d}`:`${E[t-1]} ${d}`}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{s==="semester"?N(l+1):v(t===12?1:t+1)},children:e.jsx(I,{size:18})})]})]}),e.jsx("div",{className:"overflow-x-auto text-gray-900",children:e.jsxs("table",{className:"w-full border-t border-gray-300 text-sm",children:[e.jsx("thead",{className:"text-gray-600 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left",children:"No"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Nama"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Kelas"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Keahlian"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Hadir Sekolah"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Hadir Eskul"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Hadir Event"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Keterangan"})]})}),e.jsx("tbody",{children:M.map((a,i)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3",children:i+1}),e.jsx("td",{className:"py-2 px-3",children:a.nama}),e.jsx("td",{className:"py-2 px-3",children:a.kelas}),e.jsx("td",{className:"py-2 px-3",children:a.keahlian}),e.jsx("td",{className:"py-2 px-3",children:a.hadirSekolah}),e.jsx("td",{className:"py-2 px-3",children:a.hadirEskul}),e.jsx("td",{className:"py-2 px-3",children:a.hadirEvent}),e.jsx("td",{className:`py-2 px-3 font-semibold ${a.keterangan==="Sangat Baik"?"text-green-600":a.keterangan==="Baik"?"text-blue-600":a.keterangan==="Cukup"?"text-yellow-600":a.keterangan==="Kurang"?"text-red-600":""}`,children:a.keterangan})]},i))})]})}),e.jsx("div",{className:"mt-4 flex justify-start",children:e.jsxs(x,{className:"bg-gray-100 text-gray-800 border hover:bg-gray-200",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Download Report"]})})]})})]})]})};export{oe as default};
