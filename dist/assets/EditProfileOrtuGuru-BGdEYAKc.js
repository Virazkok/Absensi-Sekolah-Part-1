import{r as t,a as g,j as e,b}from"./app-Db-aw5MQ.js";import{B as R}from"./BottomNavbarOrtu-t_m_42w5.js";import{C as B}from"./camera-vtPbql0-.js";import{F as w,a as j}from"./EyeIcon-BKUwr5YV.js";/* empty css            */import"./createLucideIcon-BBcfScga.js";const I=({auth:v})=>{const[r,c]=t.useState(null),[m,u]=t.useState(""),[l,N]=t.useState(""),[n,y]=t.useState(""),[x,k]=t.useState(null),[p,o]=t.useState(null),[i,S]=t.useState(!1),[d,C]=t.useState(!1),h=t.useRef(null);t.useEffect(()=>{g.get("/api/parent/me").then(a=>{c(a.data),u(a.data.email)})},[]);const P=a=>{if(a.target.files?.[0]){k(a.target.files[0]);const s=new FileReader;s.onload=()=>{r&&c({...r,avatar:s.result})},s.readAsDataURL(a.target.files[0])}},E=async a=>{a.preventDefault();try{o(null);const s=new FormData;s.append("email",m),l&&s.append("password_lama",l),n&&s.append("password_baru",n),x&&s.append("avatar",x);const f=await g.post("/api/parent/update-profile",s,{headers:{"Content-Type":"multipart/form-data"}});f.data.user&&localStorage.setItem("user",JSON.stringify(f.data.user)),b.visit("/parent-teacher/dashboard")}catch(s){s.response?.data?.message?o(s.response.data.message):o("Gagal update profil")}};return r?e.jsxs("div",{className:"mx-auto bg-white min-h-screen flex flex-col",children:[e.jsxs("div",{className:"bg-purple-700 p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-24 h-24 flex-shrink-0",children:[e.jsx("img",{src:r.avatar||"/default-avatar.png",alt:"Foto Profil",className:"w-24 h-24 rounded-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>h.current?.click(),className:"absolute bottom-1 right-1 bg-orange-500 text-white p-2 rounded-full shadow-md hover:bg-orange-600",children:e.jsx(B,{size:18})}),e.jsx("input",{type:"file",ref:h,accept:"image/*",className:"hidden",onChange:P})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"font-semibold text-[23px] text-white",children:r.name}),e.jsx("p",{className:"text-xs text-gray-200",children:v.user.role||"Orang Tua"})]})]}),p&&e.jsx("p",{className:"text-red-500 text-sm p-3",children:p}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsxs("form",{onSubmit:E,className:"p-4 space-y-5 text-gray-900 w-full max-w-md mx-auto",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold mb-2 text-base",children:"Akun"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:m,onChange:a=>u(a.target.value),className:"w-full border rounded px-2 py-1.5 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Password Aktif"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",placeholder:"Masukkan password lama",value:l,onChange:a=>N(a.target.value),className:"w-full border rounded px-2 py-1.5 text-sm pr-8"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-2 flex items-center",onClick:()=>S(!i),children:i?e.jsx(w,{className:"w-4 h-4 text-gray-500"}):e.jsx(j,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Password Baru"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",placeholder:"Kosongkan jika tidak ingin ganti",value:n,onChange:a=>y(a.target.value),className:"w-full border rounded px-2 py-1.5 text-sm pr-8"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-2 flex items-center",onClick:()=>C(!d),children:d?e.jsx(w,{className:"w-4 h-4 text-gray-500"}):e.jsx(j,{className:"w-4 h-4 text-gray-500"})})]})]})]})]}),e.jsxs("div",{className:"space-y-2 pb-20",children:[" ",e.jsx("button",{type:"submit",className:"w-full bg-orange-500 text-white py-2 rounded-lg text-sm font-medium shadow-md active:scale-[0.98] transition",children:"Simpan"}),e.jsx("button",{type:"button",onClick:()=>b.visit("/parent-teacher/dashboard"),className:"w-full bg-white text-black border border-orange-400 py-2 rounded-lg text-sm font-medium shadow-md active:scale-[0.98] transition",children:"Batal"})]})]})}),e.jsx(R,{})]}):e.jsx("p",{className:"p-4",children:"Loading..."})};export{I as default};
