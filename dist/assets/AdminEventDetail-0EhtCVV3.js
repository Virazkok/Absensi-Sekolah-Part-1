import{u as C,r as o,d as T,j as e,H as K,b as E,R as U}from"./app-XaT7IJdh.js";import{A as q}from"./AuthenticatedLayout-t6Yl5pHZ.js";import{B as m}from"./button-CJGk2xfH.js";import{D as F,a as H,b as O,c as $,d as I}from"./dialog-aSDCWncb.js";import{I as x}from"./input-Ip1Z780n.js";import{L as d}from"./label-cTLK_AVk.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./utils-NikRBbYi.js";import"./index-D6O2XGgT.js";import"./createLucideIcon-PjBRytQg.js";import"./index-BLXukw4F.js";import"./index-DdspcVZP.js";import"./index-DJvn5aD7.js";import"./index-C05xy4xP.js";function ne(){const{props:p}=C(),{user:W}=p,{auth:_,event:s,registrations:L,attendances:S}=C().props,[A,g]=o.useState(!1),[h,N]=o.useState("registrations"),[i,u]=o.useState(1),l=5,[j,B]=o.useState(""),{data:r,setData:n,processing:b}=T({title:s.title||"",description:s.description||"",location:s.location||"",type:s.type||"non-olahraga",start_date:s.start_date||"",end_date:s.end_date||"",image:null}),[w,k]=o.useState(null);o.useEffect(()=>{if(r.image){const a=URL.createObjectURL(r.image);return k(a),()=>URL.revokeObjectURL(a)}k(null)},[r.image]);const P=a=>{a.preventDefault();const t=new FormData;t.append("_method","PATCH"),t.append("title",r.title),t.append("description",r.description),t.append("location",r.location||""),t.append("type",r.type),t.append("start_date",r.start_date),t.append("end_date",r.end_date),r.image&&t.append("image",r.image),E.post(route("admin.events.update",s.id),t,{forceFormData:!0,onSuccess:()=>g(!1)})},v=L.filter(a=>a.user.name.toLowerCase().includes(j.toLowerCase())),y=S.filter(a=>a.user.name.toLowerCase().includes(j.toLowerCase())),f=a=>{if(!a)return"-";try{return new Date(a).toLocaleString("id-ID",{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}};s.image_url||s.image&&`${s.image}`,h==="registrations"?v.slice((i-1)*l,i*l):y.slice((i-1)*l,i*l);const c=Math.ceil((h==="registrations"?v.length:y.length)/l);return Array.from({length:c},(a,t)=>t+1).filter(a=>a===1||a===c||Math.abs(a-i)<=2),e.jsxs(q,{user:_.user,header:e.jsx("h2",{className:"font-semibold text-xl",children:"Detail Event"}),children:[e.jsx(K,{title:`Detail Event - ${s.title}`}),e.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 flex flex-col",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsx("aside",{className:"hidden md:block md:w-60 bg-white p-4 shadow-lg min-h-screen",children:e.jsxs("nav",{className:"space-y-2 text-sm",children:[e.jsxs("div",{onClick:()=>window.location.href="/Admin/Dashboard",className:"p-2 rounded bg-[#E86D1F] font-medium cursor-pointer text-white flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--dashboard-lineW.svg",alt:""}),"Dashboard"]}),e.jsxs("div",{onClick:()=>window.location.href="/Admin/UserManagement",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-settings-line.svg",alt:""})," User Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/events",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--list-settings-line.svg",alt:""})," Event Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/eskul",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-community-line.svg",alt:""})," Ekstrakurikuler"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/riwayat-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--history-line.svg",alt:""})," Riwayat Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/statistik-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--pie-chart-2-line.svg",alt:""})," Statistik Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/laporan-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--file-text-line.svg",alt:""})," Laporan"]})]})}),e.jsxs("main",{className:"flex-1 overflow-x-auto p-7 pt-3",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center bg-white p-2 gap-10 rounded-xl shadow border",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("img",{src:p.auth?.user?.avatar??"/images/avatar-placeholder.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}),e.jsx("div",{className:"text-[16px]",children:p.auth?.user?.name??"Admin"})]}),e.jsxs("div",{children:[e.jsx("button",{className:"p-2 rounded bg-white",children:"⚙️"}),e.jsx("button",{className:"p-2 rounded bg-white",children:"🔓"})]})]})]}),e.jsxs("div",{className:"bg-white border border-[#8B23ED] rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"max-w-380 w-1000 h-100 aspect-[16/9] overflow bg-gray-100 m-3",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover rounded-xl"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Nama Event"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deskripsi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Kategori"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Waktu Acara"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lokasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.title}),e.jsx("div",{className:"text-sm text-gray-700 max-w-prose",children:s.description}),e.jsx("div",{className:"text-sm text-gray-900",children:s.type}),e.jsxs("div",{className:"text-sm text-gray-900",children:[f(s.start_date)," — ",f(s.end_date)]}),e.jsx("div",{className:"text-sm text-gray-900",children:s.location||"-"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(m,{className:"text-sm bg-white text-gray-900 border border-[#8B23ED] px-3 py-2 mr-2 rounded-lg w-30 hover:border-[#8B23ED] hover:bg-white hover:text-gray-900 hover:bg-gray-200",variant:"outline",onClick:()=>E.get(route("admin.events.manage")),children:"Kembali"}),e.jsx(m,{onClick:()=>g(!0),className:"text-sm bg-[#8B23ED] text-white px-3 py-2 mr-2 rounded-lg w-30 hover:bg-[#8B23ED] hover:text-white hover:bg-purple-700",children:"Edit"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-15 mb-5",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:h==="registrations"?"purple":"pending",onClick:()=>N("registrations"),className:"border border-[#8B23ED]",children:"Pendaftaran"}),e.jsx(m,{variant:h==="attendances"?"purple":"pending",onClick:()=>N("attendances"),className:"border border-[#8B23ED]",children:"Kehadiran"})]}),e.jsx("div",{className:"w-72",children:e.jsx(x,{placeholder:"Cari nama peserta",value:j,onChange:a=>B(a.target.value),className:"border border-[#8B23ED]"})})]}),e.jsx("div",{className:"bg-white border  border-[#8B23ED] rounded-lg shadow-sm p-4",children:h==="registrations"?e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 px-3",children:"No"}),e.jsx("th",{className:"py-2 px-3",children:"Nama Peserta"}),e.jsx("th",{className:"py-2 px-3",children:"Kelas"}),e.jsx("th",{className:"py-2 px-3",children:"Kategori"}),e.jsx("th",{className:"py-2 px-3",children:"Tanggal Daftar"})]})}),e.jsx("tbody",{children:v.map((a,t)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-3 px-3 text-gray-600",children:(i-1)*l+t+1}),e.jsx("td",{className:"py-3 px-3",children:a.user.name}),e.jsx("td",{className:"py-3 px-3",children:a.user.kelas?.name||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.sport_category||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.created_at?f(a.created_at):"-"})]},a.id))})]}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 px-3",children:"No"}),e.jsx("th",{className:"py-2 px-3",children:"Nama Peserta"}),e.jsx("th",{className:"py-2 px-3",children:"Kelas"}),e.jsx("th",{className:"py-2 px-3",children:"Status"})]})}),e.jsx("tbody",{children:y.map((a,t)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-3 px-3 text-gray-600",children:(i-1)*l+t+1}),e.jsx("td",{className:"py-3 px-3",children:a.user.name}),e.jsx("td",{className:"py-3 px-3",children:a.user.kelas?.name||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.status})]},a.id))})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-full px-3 py-1 bg-white shadow-sm",children:[e.jsx("button",{onClick:()=>u(a=>Math.max(1,a-1)),disabled:i===1,className:"p-1 text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-40"}),Array.from({length:c||1},(a,t)=>t+1).filter(a=>a===1||a===(c||1)||a>=i-2&&a<=i+2).map((a,t,M)=>{const D=M[t-1],R=D&&a-D>1;return e.jsxs(U.Fragment,{children:[R&&e.jsx("span",{className:"px-2 text-gray-400",children:"…"}),e.jsx("button",{onClick:()=>u(a),className:`px-3 py-1.5 rounded-full transition-all ${i===a?"bg-orange-400 text-white":"text-gray-700 hover:bg-gray-100"}`,children:a})]},a)}),e.jsx("button",{onClick:()=>u(a=>Math.min(c||1,a+1)),disabled:i===(c||1),className:"p-1 text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-40"})]})]}),e.jsx(F,{open:A,onOpenChange:g,children:e.jsxs(H,{className:"sm:max-w-lg",children:[e.jsx(O,{children:e.jsx($,{children:"Edit Event"})}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Gambar Event"}),e.jsx(x,{type:"file",accept:"image/*",onChange:a=>n("image",a.target.files?a.target.files[0]:null)}),e.jsx("div",{className:"mt-2",children:w?e.jsx("img",{src:w,className:"w-48 h-28 object-cover rounded",alt:"preview"}):e.jsx("img",{src:s.image?`/storage/${s.image}`:"/images/default-event.png",className:"w-48 h-28 object-cover rounded",alt:"event",onError:a=>a.currentTarget.src="/images/default-event.png"})})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Judul"}),e.jsx(x,{value:r.title,onChange:a=>n("title",a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Deskripsi"}),e.jsx("textarea",{value:r.description,onChange:a=>n("description",a.target.value),className:"w-full rounded border-gray-300",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Lokasi"}),e.jsx(x,{value:r.location,onChange:a=>n("location",a.target.value),placeholder:"Contoh: Aula Sekolah"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Tipe Event"}),e.jsxs("select",{value:r.type,onChange:a=>n("type",a.target.value),className:"w-full rounded border-gray-300 p-2",required:!0,children:[e.jsx("option",{value:"olahraga",children:"Olahraga"}),e.jsx("option",{value:"non-olahraga",children:"Non-olahraga"}),e.jsx("option",{value:"pemberitahuan",children:"Pemberitahuan"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Tanggal Mulai"}),e.jsx(x,{type:"datetime-local",value:r.start_date,onChange:a=>n("start_date",a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Tanggal Selesai"}),e.jsx(x,{type:"datetime-local",value:r.end_date,onChange:a=>n("end_date",a.target.value),required:!0})]})]}),e.jsxs(I,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Batal"}),e.jsx(m,{type:"submit",disabled:b,children:b?"Menyimpan...":"Simpan"})]})]})]})})]})]})})]})}export{ne as default};
