import{r as c,j as e}from"./app-Db-aw5MQ.js";import{L as u,Q as g,y as s}from"./QRScanner-kGpY2TYg.js";/* empty css            */import"./clsx-B-dksMZM.js";function f(){const[d,i]=c.useState(!1),[r,l]=c.useState(null),p=async h=>{let t;try{if(t=JSON.parse(h),!t.token||!t.user_id||!t.event_id){s.error("Token / user_id / event_id tidak lengkap di QR");return}}catch{s.error("Format QR bukan JSON");return}try{const a=await fetch("http://127.0.0.1:8000/api/events/scan-qr",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":decodeURIComponent((m=>document.cookie.match(new RegExp("(^| )"+m+"=([^;]+)"))?.[2]||"")("XSRF-TOKEN"))},body:JSON.stringify(t)}),o=await a.json();if(!a.ok)throw new Error(o.message||a.statusText);s.success(o.message||"Sukses"),l(o.registration)}catch(n){console.error(n),s.error(n.message||"Terjadi kesalahan")}};return e.jsxs("div",{className:"p-6 bg-white rounded shadow text-gray-900",children:[e.jsx(u,{position:"top-right",autoClose:5e3}),d?e.jsx(g,{onScan:p,onClose:()=>i(!1)}):e.jsx("button",{onClick:()=>i(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded ",children:"Mode Scan QR (Event)"}),r&&e.jsxs("div",{className:"mt-6 p-4 border rounded text-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 ",children:"Data Kehadiran Terakhir"}),e.jsxs("p",{children:["Peserta: ",r?.user?.name??"-"]}),e.jsxs("p",{children:["Kategori: ",r?.registration?.sport_category??"-"]}),e.jsxs("p",{children:["Waktu: ",new Date().toLocaleTimeString()]})]})]})}export{f as default};
