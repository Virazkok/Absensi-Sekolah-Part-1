import{u as k,r as c,d as L,j as e,H as E,b as v}from"./app-Db-aw5MQ.js";import{A as S}from"./AuthenticatedLayout-CS7Tii-L.js";import{B as n}from"./button-CTj6SyfF.js";import{D as T,a as A,b as P,c as q,d as K}from"./dialog-BTz8PEvP.js";import{I as d}from"./input-CTXf7KjN.js";import{L as l}from"./label-BVcLCHDB.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./utils-NikRBbYi.js";import"./index-D0XbYizj.js";import"./createLucideIcon-BBcfScga.js";import"./Combination-CeIkTSzD.js";import"./index-DKaELoCc.js";import"./index-BEN4BbhH.js";import"./index-BngaQRGO.js";function X(){const{auth:y,event:t,registrations:N,attendances:f}=k().props,[b,o]=c.useState(!1),[m,p]=c.useState("registrations"),[x,w]=c.useState(""),{data:s,setData:i,processing:u}=L({title:t.title||"",description:t.description||"",location:t.location||"",type:t.type||"non-olahraga",start_date:t.start_date||"",end_date:t.end_date||"",image:null}),[g,j]=c.useState(null);c.useEffect(()=>{if(s.image){const a=URL.createObjectURL(s.image);return j(a),()=>URL.revokeObjectURL(a)}j(null)},[s.image]);const C=a=>{a.preventDefault();const r=new FormData;r.append("_method","PATCH"),r.append("title",s.title),r.append("description",s.description),r.append("location",s.location||""),r.append("type",s.type),r.append("start_date",s.start_date),r.append("end_date",s.end_date),s.image&&r.append("image",s.image),v.post(route("admin.events.update",t.id),r,{forceFormData:!0,onSuccess:()=>o(!1)})},_=N.filter(a=>a.user.name.toLowerCase().includes(x.toLowerCase())),D=f.filter(a=>a.user.name.toLowerCase().includes(x.toLowerCase())),h=a=>{if(!a)return"-";try{return new Date(a).toLocaleString("id-ID",{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}};return t.image_url||t.image&&`${t.image}`,e.jsxs(S,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl",children:"Detail Event"}),children:[e.jsx(E,{title:`Detail Event - ${t.title}`}),e.jsxs("div",{className:"py-8 max-w-6xl mx-auto sm:px-6 lg:px-8 space-y-6 text-gray-900",children:[e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"w-full aspect-[16/9] overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-48 object-cover rounded-xl"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Nama Event"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deskripsi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Kategori"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Waktu Acara"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lokasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-700 max-w-prose",children:t.description}),e.jsx("div",{className:"text-sm text-gray-900",children:t.type}),e.jsxs("div",{className:"text-sm text-gray-900",children:[h(t.start_date)," â€” ",h(t.end_date)]}),e.jsx("div",{className:"text-sm text-gray-900",children:t.location||"-"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(n,{variant:"outline",onClick:()=>v.get(route("admin.events.manage")),children:"Kembali"}),e.jsx(n,{onClick:()=>o(!0),children:"Edit"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:m==="registrations"?"default":"ghost",onClick:()=>p("registrations"),children:"Pendaftaran"}),e.jsx(n,{variant:m==="attendances"?"default":"ghost",onClick:()=>p("attendances"),children:"Kehadiran"})]}),e.jsx("div",{className:"w-72",children:e.jsx(d,{placeholder:"Cari nama peserta",value:x,onChange:a=>w(a.target.value)})})]}),e.jsx("div",{className:"bg-white border rounded-lg shadow-sm p-4",children:m==="registrations"?e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 px-3",children:"No"}),e.jsx("th",{className:"py-2 px-3",children:"Nama Peserta"}),e.jsx("th",{className:"py-2 px-3",children:"Kelas"}),e.jsx("th",{className:"py-2 px-3",children:"Kategori"}),e.jsx("th",{className:"py-2 px-3",children:"Tanggal Daftar"})]})}),e.jsx("tbody",{children:_.map((a,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-3 px-3 text-gray-600",children:r+1}),e.jsx("td",{className:"py-3 px-3",children:a.user.name}),e.jsx("td",{className:"py-3 px-3",children:a.user.kelas?.name||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.sport_category||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.created_at?h(a.created_at):"-"})]},a.id))})]}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 px-3",children:"No"}),e.jsx("th",{className:"py-2 px-3",children:"Nama Peserta"}),e.jsx("th",{className:"py-2 px-3",children:"Kelas"}),e.jsx("th",{className:"py-2 px-3",children:"Status"})]})}),e.jsx("tbody",{children:D.map((a,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-3 px-3 text-gray-600",children:r+1}),e.jsx("td",{className:"py-3 px-3",children:a.user.name}),e.jsx("td",{className:"py-3 px-3",children:a.user.kelas?.name||"-"}),e.jsx("td",{className:"py-3 px-3",children:a.status})]},a.id))})]})}),e.jsx(T,{open:b,onOpenChange:o,children:e.jsxs(A,{className:"sm:max-w-lg",children:[e.jsx(P,{children:e.jsx(q,{children:"Edit Event"})}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Gambar Event"}),e.jsx(d,{type:"file",accept:"image/*",onChange:a=>i("image",a.target.files?a.target.files[0]:null)}),e.jsx("div",{className:"mt-2",children:g?e.jsx("img",{src:g,className:"w-48 h-28 object-cover rounded",alt:"preview"}):e.jsx("img",{src:t.image?`/storage/${t.image}`:"/images/default-event.png",className:"w-48 h-28 object-cover rounded",alt:"event",onError:a=>a.currentTarget.src="/images/default-event.png"})})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Judul"}),e.jsx(d,{value:s.title,onChange:a=>i("title",a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Deskripsi"}),e.jsx("textarea",{value:s.description,onChange:a=>i("description",a.target.value),className:"w-full rounded border-gray-300",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Lokasi"}),e.jsx(d,{value:s.location,onChange:a=>i("location",a.target.value),placeholder:"Contoh: Aula Sekolah"})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Tipe Event"}),e.jsxs("select",{value:s.type,onChange:a=>i("type",a.target.value),className:"w-full rounded border-gray-300 p-2",required:!0,children:[e.jsx("option",{value:"olahraga",children:"Olahraga"}),e.jsx("option",{value:"non-olahraga",children:"Non-olahraga"}),e.jsx("option",{value:"pemberitahuan",children:"Pemberitahuan"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Tanggal Mulai"}),e.jsx(d,{type:"datetime-local",value:s.start_date,onChange:a=>i("start_date",a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Tanggal Selesai"}),e.jsx(d,{type:"datetime-local",value:s.end_date,onChange:a=>i("end_date",a.target.value),required:!0})]})]}),e.jsxs(K,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Batal"}),e.jsx(n,{type:"submit",disabled:u,children:u?"Menyimpan...":"Simpan"})]})]})]})})]})]})}export{X as default};
