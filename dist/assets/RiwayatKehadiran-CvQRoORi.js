import{r as a,a as y,j as e}from"./app-XaT7IJdh.js";import{d as N}from"./dayjs.min-Dn1w6G5o.js";import{F as K}from"./filter-NsWfKLvW.js";import{c as z}from"./createLucideIcon-PjBRytQg.js";import{C as v}from"./chevron-left--oAHYdWf.js";import{C as k}from"./chevron-right-OCH7eLeA.js";/* empty css            *//**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],M=z("Search",A),P=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],W=()=>{const[i,u]=a.useState("bulan"),[t,o]=a.useState(N().month()+1),[r,d]=a.useState(N().year()),[n,c]=a.useState(1),[g,w]=a.useState(""),[E,C]=a.useState([]),[m,F]=a.useState(1),[l,S]=a.useState("sekolah"),[h,B]=a.useState(null),[T,D]=a.useState([]),x=10,R=async()=>{try{const s=await y.get("http://127.0.0.1:8000/api/admin/riwayat-kehadiran",{params:{filter:i,bulan:t,tahun:r,semester:n,type:l,eskul_id:h}});C(s.data.data||[])}catch(s){console.error("Error fetching data",s)}};a.useEffect(()=>{R()},[i,t,n,l,h,r]),a.useEffect(()=>{l==="eskul"&&y.get("http://127.0.0.1:8000/api/eskul/list").then(s=>{D(s.data),s.data.length>0&&!h&&B(s.data[0].id)})},[l]);const b=s=>{s==="prev"?n===1?(c(2),d(r-1)):c(1):n===2?(c(1),d(r+1)):c(2)},j=E.filter(s=>(s.nama||"").toLowerCase().includes(g.toLowerCase())),f=j.slice((m-1)*x,m*x),L=Math.ceil(j.length/x);return e.jsxs("div",{className:"min-h-screen bg-[#F7F7F7] text-gray-900 flex",children:[e.jsx("aside",{className:"hidden md:block md:w-60 bg-white p-4 shadow-lg min-h-screen",children:e.jsxs("nav",{className:"space-y-2 text-sm",children:[e.jsxs("div",{onClick:()=>window.location.href="/Admin/Dashboard",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--dashboard-line.svg",alt:""}),"Dashboard"]}),e.jsxs("div",{onClick:()=>window.location.href="/Admin/UserManagement",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-settings-line.svg",alt:""})," User Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/events",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--list-settings-line.svg",alt:""})," Event Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/eskul",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-community-line.svg",alt:""})," Ekstrakurikuler"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/riwayat-kehadiran",className:"p-2 rounded bg-[#E86D1F] font-medium cursor-pointer text-white flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--history-lineW.svg",alt:""})," Riwayat Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/statistik-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--pie-chart-2-line.svg",alt:""})," Statistik Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/laporan-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--file-text-line.svg",alt:""})," Laporan"]})]})}),e.jsxs("main",{className:"flex-1 p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Riwayat Kehadiran"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow border border-[#C9A2FF] p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rekap Kehadiran Siswa"}),e.jsxs("span",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{size:16})," Filter"]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>u("bulan"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i==="bulan"?"bg-[#8B23ED] text-white border-2 border-[#8B23ED]":"bg-white text-[#8B23ED] border-2 border-[#8B23ED]"}`,children:"Bulanan"}),e.jsx("button",{onClick:()=>u("semester"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i==="semester"?"bg-[#8B23ED] text-white border-2 border-[#8B23ED]":"bg-white text-[#8B23ED] border-2 border-[#8B23ED] "}`,children:"Semester"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:s=>S(s.target.value),className:"border-2 border-[#8B23ED] rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#8B23ED]",children:[e.jsx("option",{value:"sekolah",children:"Rekapan Sekolah"}),e.jsx("option",{value:"eskul",children:"Rekapan Eskul"})]}),e.jsxs("div",{className:"flex items-center border border-[#8B23ED] rounded-lg px-3 py-2",children:[e.jsx(M,{size:16,className:"text-gray-900"}),e.jsx("input",{type:"text",placeholder:"Cari siswa",value:g,onChange:s=>w(s.target.value),className:"ml-2 outline-none text-sm w-40 text-gray-900"})]})]})]}),i==="bulan"?e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-gray-700 ml-2",children:[e.jsx("button",{onClick:()=>o(t===1?12:t-1),className:"hover:text-[#7B4EFF]",children:e.jsx(v,{size:18})}),e.jsxs("span",{className:"font-medium text-base",children:[P[t-1]," ",r]}),e.jsx("button",{onClick:()=>{t===12?(o(1),d(r+1)):o(t+1)},className:"hover:text-[#7B4EFF]",children:e.jsx(k,{size:18})})]}):e.jsxs("div",{className:"flex items-center gap-3 mb-6 text-gray-700",children:[e.jsx("button",{onClick:()=>b("prev"),className:"hover:text-[#7B4EFF]",children:e.jsx(v,{size:18})}),e.jsxs("span",{className:"font-medium text-base",children:["Semester ",n," ",r]}),e.jsx("button",{onClick:()=>b("next"),className:"hover:text-[#7B4EFF]",children:e.jsx(k,{size:18})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"py-2",children:"Nama Siswa"}),e.jsx("th",{className:"py-2",children:"Kelas"}),e.jsx("th",{className:"py-2",children:"Keahlian"}),e.jsx("th",{className:"py-2",children:"Total"}),e.jsx("th",{className:"py-2",children:"Persentase"})]})}),e.jsx("tbody",{children:f.length>0?f.map((s,p)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-2",children:s.nama??"-"}),e.jsx("td",{className:"py-2",children:s.kelas??"-"}),e.jsx("td",{className:"py-2",children:s.keahlian??"-"}),e.jsx("td",{className:"py-2",children:s.total??"0/0"}),e.jsx("td",{className:"py-2",children:s.persentase??"0%"})]},p)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-gray-500 py-4",children:"Tidak ada data"})})})]})}),e.jsx("div",{className:"flex justify-end mt-4 gap-1",children:Array.from({length:L},(s,p)=>p+1).map(s=>e.jsx("button",{onClick:()=>F(s),className:`px-3 py-1 rounded-full border text-sm ${m===s?"bg-[#FF6B00] text-white border-[#FF6B00]":"bg-white border-gray-300 hover:bg-gray-100"}`,children:s},s))})]})]})]})};export{W as default};
