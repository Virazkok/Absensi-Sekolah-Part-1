import{r as d,j as e,H as x}from"./app-Db-aw5MQ.js";import{L as h,Q as p,y as r}from"./QRScanner-kGpY2TYg.js";import{B as f}from"./BottomNavbarOrtu-t_m_42w5.js";import{C as u}from"./camera-vtPbql0-.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./createLucideIcon-BBcfScga.js";const S=({auth:t})=>{const[l,o]=d.useState(!1),i=async a=>{try{const s=JSON.parse(a),n=await fetch("http://127.0.0.1:8000/api/scan-qr/check-in",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-XSRF-TOKEN":m("XSRF-TOKEN")||""},body:JSON.stringify({qr_data:s})}),c=await n.json();n.ok?r.success(c.message||"Absensi berhasil dicatat!"):r.error(c.message||"Gagal mencatat absensi")}catch(s){console.error("Error:",s),r.error(s instanceof Error?s.message:"Terjadi kesalahan")}};function m(a){const s=document.cookie.match(new RegExp("(^| )"+a+"=([^;]+)"));return s?decodeURIComponent(s[2]):null}return e.jsxs("div",{className:"min-h-screen flex flex-col bg-white text-gray-900 pb-20",children:[e.jsx(x,{title:"Dashboard"}),e.jsx(h,{position:"top-right",autoClose:5e3}),e.jsxs("div",{className:"bg-purple-700 p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-20 flex-shrink-0",children:[e.jsx("img",{src:t.user.avatar||"/default-avatar.png",alt:"Foto Profil",className:"w-20 h-20 rounded-full object-cover"}),e.jsx("button",{type:"button",className:"absolute bottom-1 right-1 bg-orange-500 text-white p-1.5 rounded-full shadow-md",children:e.jsx(u,{size:16})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"font-semibold text-lg text-white",children:t.user.name}),e.jsx("p",{className:"text-sm text-gray-200",children:t.user.role||"Guru"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center h-full",children:l?e.jsx(p,{onScan:i,onClose:()=>o(!1)}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-50 flex items-center justify-center bg-white border-b",children:e.jsx("img",{src:"/icons/mdi--camera-off-outline.svg",className:"w-16 h-16 text-gray-400 pb-[20px] mb-[120px]"})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>o(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-1 rounded-lg font-medium w-60",children:"Scan QR Code"})})]})}),e.jsx(f,{})]})};export{S as default};
