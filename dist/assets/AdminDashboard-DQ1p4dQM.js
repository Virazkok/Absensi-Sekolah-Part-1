import{g as Qe,R as ce,r as i,u as et,a as re,j as e,H as tt}from"./app-XaT7IJdh.js";import{d as j}from"./dayjs.min-Dn1w6G5o.js";import rt from"./registerAdminDashboard-DiKp1uyC.js";import at from"./ManageEvents-BpJbQ2rt.js";import st from"./AdminEskulCreate-BZ969yLM.js";import{s as nt,p as ot,o as $e,K as it,_ as lt,L as dt}from"./render-B9m_eTKl.js";/* empty css            */import"./dialog-aSDCWncb.js";import"./index-D6O2XGgT.js";import"./createLucideIcon-PjBRytQg.js";import"./index-BLXukw4F.js";import"./index-DdspcVZP.js";import"./index-DJvn5aD7.js";import"./button-CJGk2xfH.js";import"./clsx-B-dksMZM.js";import"./utils-NikRBbYi.js";import"./index-C05xy4xP.js";import"./input-Ip1Z780n.js";import"./label-cTLK_AVk.js";import"./select-DDqEtzWm.js";import"./index-CArVgHNd.js";import"./index-DHwZL11B.js";import"./input-error-Bjc7KgQk.js";import"./loader-circle-igEfraLn.js";var I={exports:{}},ct=I.exports,Ee;function ut(){return Ee||(Ee=1,function(t,r){(function(a,n){t.exports=n()})(ct,function(){var a="day";return function(n,o,d){var c=function(f){return f.add(4-f.isoWeekday(),a)},l=o.prototype;l.isoWeekYear=function(){return c(this).year()},l.isoWeek=function(f){if(!this.$utils().u(f))return this.add(7*(f-this.isoWeek()),a);var h,p,g,v,$=c(this),x=(h=this.isoWeekYear(),p=this.$u,g=(p?d.utc:d)().year(h).startOf("year"),v=4-g.isoWeekday(),g.isoWeekday()>4&&(v+=7),g.add(v,a));return $.diff(x,"week")+1},l.isoWeekday=function(f){return this.$utils().u(f)?this.day()||7:this.day(this.day()%7?f:f-7)};var u=l.startOf;l.startOf=function(f,h){var p=this.$utils(),g=!!p.u(h)||h;return p.p(f)==="isoweek"?g?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):u.bind(this)(f,h)}}})}(I)),I.exports}var ft=ut();const mt=Qe(ft),De=typeof document<"u"?ce.useLayoutEffect:()=>{};var ae;const pt=(ae=ce.useInsertionEffect)!==null&&ae!==void 0?ae:De;function ht(t){const r=i.useRef(null);return pt(()=>{r.current=t},[t]),i.useCallback((...a)=>{const n=r.current;return n?.(...a)},[])}const D=t=>{var r;return(r=t?.ownerDocument)!==null&&r!==void 0?r:document},S=t=>t&&"window"in t&&t.window===t?t:D(t).defaultView||window;function xt(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function bt(t){return xt(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let gt=!1;function ue(){return gt}function Te(t,r){if(!ue())return r&&t?t.contains(r):!1;if(!t||!r)return!1;let a=r;for(;a!==null;){if(a===t)return!0;a.tagName==="SLOT"&&a.assignedSlot?a=a.assignedSlot.parentNode:bt(a)?a=a.host:a=a.parentNode}return!1}const ne=(t=document)=>{var r;if(!ue())return t.activeElement;let a=t.activeElement;for(;a&&"shadowRoot"in a&&(!((r=a.shadowRoot)===null||r===void 0)&&r.activeElement);)a=a.shadowRoot.activeElement;return a};function Le(t){return ue()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function vt(t){var r;if(typeof window>"u"||window.navigator==null)return!1;let a=(r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands;return Array.isArray(a)&&a.some(n=>t.test(n.brand))||t.test(window.navigator.userAgent)}function yt(t){var r;return typeof window<"u"&&window.navigator!=null?t.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function Se(t){let r=null;return()=>(r==null&&(r=t()),r)}const wt=Se(function(){return yt(/^Mac/i)}),jt=Se(function(){return vt(/Android/i)});function Ce(){let t=i.useRef(new Map),r=i.useCallback((o,d,c,l)=>{let u=l?.once?(...f)=>{t.current.delete(c),c(...f)}:c;t.current.set(c,{type:d,eventTarget:o,fn:u,options:l}),o.addEventListener(d,u,l)},[]),a=i.useCallback((o,d,c,l)=>{var u;let f=((u=t.current.get(c))===null||u===void 0?void 0:u.fn)||c;o.removeEventListener(d,f,l),t.current.delete(c)},[]),n=i.useCallback(()=>{t.current.forEach((o,d)=>{a(o.eventTarget,o.type,d,o.options)})},[a]);return i.useEffect(()=>n,[n]),{addGlobalListener:r,removeGlobalListener:a,removeAllGlobalListeners:n}}function $t(t){return t.mozInputSource===0&&t.isTrusted?!0:jt()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Me(t){let r=t;return r.nativeEvent=t,r.isDefaultPrevented=()=>r.defaultPrevented,r.isPropagationStopped=()=>r.cancelBubble,r.persist=()=>{},r}function Et(t,r){Object.defineProperty(t,"target",{value:r}),Object.defineProperty(t,"currentTarget",{value:r})}function Fe(t){let r=i.useRef({isFocused:!1,observer:null});De(()=>{const n=r.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let a=ht(n=>{t?.(n)});return i.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){r.current.isFocused=!0;let o=n.target,d=c=>{if(r.current.isFocused=!1,o.disabled){let l=Me(c);a(l)}r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};o.addEventListener("focusout",d,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&o.disabled){var c;(c=r.current.observer)===null||c===void 0||c.disconnect();let l=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:l})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:l}))}}),r.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[a])}let kt=!1,B=null,oe=new Set,P=new Map,C=!1,ie=!1;const Nt={Tab:!0,Escape:!0};function fe(t,r){for(let a of oe)a(t,r)}function Dt(t){return!(t.metaKey||!wt()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function K(t){C=!0,Dt(t)&&(B="keyboard",fe("keyboard",t))}function M(t){B="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(C=!0,fe("pointer",t))}function _e(t){$t(t)&&(C=!0,B="virtual")}function Pe(t){t.target===window||t.target===document||kt||!t.isTrusted||(!C&&!ie&&(B="virtual",fe("virtual",t)),C=!1,ie=!1)}function Be(){C=!1,ie=!0}function le(t){if(typeof window>"u"||typeof document>"u"||P.get(S(t)))return;const r=S(t),a=D(t);let n=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){C=!0,n.apply(this,arguments)},a.addEventListener("keydown",K,!0),a.addEventListener("keyup",K,!0),a.addEventListener("click",_e,!0),r.addEventListener("focus",Pe,!0),r.addEventListener("blur",Be,!1),typeof PointerEvent<"u"&&(a.addEventListener("pointerdown",M,!0),a.addEventListener("pointermove",M,!0),a.addEventListener("pointerup",M,!0)),r.addEventListener("beforeunload",()=>{Re(t)},{once:!0}),P.set(r,{focus:n})}const Re=(t,r)=>{const a=S(t),n=D(t);r&&n.removeEventListener("DOMContentLoaded",r),P.has(a)&&(a.HTMLElement.prototype.focus=P.get(a).focus,n.removeEventListener("keydown",K,!0),n.removeEventListener("keyup",K,!0),n.removeEventListener("click",_e,!0),a.removeEventListener("focus",Pe,!0),a.removeEventListener("blur",Be,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",M,!0),n.removeEventListener("pointermove",M,!0),n.removeEventListener("pointerup",M,!0)),P.delete(a))};function Tt(t){const r=D(t);let a;return r.readyState!=="loading"?le(t):(a=()=>{le(t)},r.addEventListener("DOMContentLoaded",a)),()=>Re(t,a)}typeof document<"u"&&Tt();function He(){return B!=="pointer"}const Lt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function St(t,r,a){let n=D(a?.target);const o=typeof window<"u"?S(a?.target).HTMLInputElement:HTMLInputElement,d=typeof window<"u"?S(a?.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?S(a?.target).HTMLElement:HTMLElement,l=typeof window<"u"?S(a?.target).KeyboardEvent:KeyboardEvent;return t=t||n.activeElement instanceof o&&!Lt.has(n.activeElement.type)||n.activeElement instanceof d||n.activeElement instanceof c&&n.activeElement.isContentEditable,!(t&&r==="keyboard"&&a instanceof l&&!Nt[a.key])}function Ct(t,r,a){le(),i.useEffect(()=>{let n=(o,d)=>{St(!!a?.isTextInput,o,d)&&t(He())};return oe.add(n),()=>{oe.delete(n)}},r)}function Mt(t){let{isDisabled:r,onFocus:a,onBlur:n,onFocusChange:o}=t;const d=i.useCallback(u=>{if(u.target===u.currentTarget)return n&&n(u),o&&o(!1),!0},[n,o]),c=Fe(d),l=i.useCallback(u=>{const f=D(u.target),h=f?ne(f):ne();u.target===u.currentTarget&&h===Le(u.nativeEvent)&&(a&&a(u),o&&o(!0),c(u))},[o,a,c]);return{focusProps:{onFocus:!r&&(a||o||n)?l:void 0,onBlur:!r&&(n||o)?d:void 0}}}function Ft(t){let{isDisabled:r,onBlurWithin:a,onFocusWithin:n,onFocusWithinChange:o}=t,d=i.useRef({isFocusWithin:!1}),{addGlobalListener:c,removeAllGlobalListeners:l}=Ce(),u=i.useCallback(p=>{p.currentTarget.contains(p.target)&&d.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(d.current.isFocusWithin=!1,l(),a&&a(p),o&&o(!1))},[a,o,d,l]),f=Fe(u),h=i.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const g=D(p.target),v=ne(g);if(!d.current.isFocusWithin&&v===Le(p.nativeEvent)){n&&n(p),o&&o(!0),d.current.isFocusWithin=!0,f(p);let $=p.currentTarget;c(g,"focus",x=>{if(d.current.isFocusWithin&&!Te($,x.target)){let E=new g.defaultView.FocusEvent("blur",{relatedTarget:x.target});Et(E,$);let k=Me(E);u(k)}},{capture:!0})}},[n,o,f,c,u]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:u}}}let de=!1,Y=0;function _t(){de=!0,setTimeout(()=>{de=!1},50)}function ke(t){t.pointerType==="touch"&&_t()}function Pt(){if(!(typeof document>"u"))return Y===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",ke),Y++,()=>{Y--,!(Y>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",ke)}}function Bt(t){let{onHoverStart:r,onHoverChange:a,onHoverEnd:n,isDisabled:o}=t,[d,c]=i.useState(!1),l=i.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;i.useEffect(Pt,[]);let{addGlobalListener:u,removeAllGlobalListeners:f}=Ce(),{hoverProps:h,triggerHoverEnd:p}=i.useMemo(()=>{let g=(x,E)=>{if(l.pointerType=E,o||E==="touch"||l.isHovered||!x.currentTarget.contains(x.target))return;l.isHovered=!0;let k=x.currentTarget;l.target=k,u(D(x.target),"pointerover",R=>{l.isHovered&&l.target&&!Te(l.target,R.target)&&v(R,R.pointerType)},{capture:!0}),r&&r({type:"hoverstart",target:k,pointerType:E}),a&&a(!0),c(!0)},v=(x,E)=>{let k=l.target;l.pointerType="",l.target=null,!(E==="touch"||!l.isHovered||!k)&&(l.isHovered=!1,f(),n&&n({type:"hoverend",target:k,pointerType:E}),a&&a(!1),c(!1))},$={};return typeof PointerEvent<"u"&&($.onPointerEnter=x=>{de&&x.pointerType==="mouse"||g(x,x.pointerType)},$.onPointerLeave=x=>{!o&&x.currentTarget.contains(x.target)&&v(x,x.pointerType)}),{hoverProps:$,triggerHoverEnd:v}},[r,a,n,o,l,u,f]);return i.useEffect(()=>{o&&p({currentTarget:l.target},l.pointerType)},[o]),{hoverProps:h,isHovered:d}}function Rt(t={}){let{autoFocus:r=!1,isTextInput:a,within:n}=t,o=i.useRef({isFocused:!1,isFocusVisible:r||He()}),[d,c]=i.useState(!1),[l,u]=i.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=i.useCallback(()=>u(o.current.isFocused&&o.current.isFocusVisible),[]),h=i.useCallback(v=>{o.current.isFocused=v,c(v),f()},[f]);Ct(v=>{o.current.isFocusVisible=v,f()},[],{isTextInput:a});let{focusProps:p}=Mt({isDisabled:n,onFocusChange:h}),{focusWithinProps:g}=Ft({isDisabled:!n,onFocusWithinChange:h});return{isFocused:d,isFocusVisible:l,focusProps:n?g:p}}function Ht(t){var r,a;return nt.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(a=(r=t.current)==null?void 0:r.ownerDocument)!=null?a:document:null:document}function Wt(t){let r=t.width/2,a=t.height/2;return{top:t.clientY-a,right:t.clientX+r,bottom:t.clientY+a,left:t.clientX-r}}function At(t,r){return!(!t||!r||t.right<r.left||t.left>r.right||t.bottom<r.top||t.top>r.bottom)}function Yt({disabled:t=!1}={}){let r=i.useRef(null),[a,n]=i.useState(!1),o=ot(),d=$e(()=>{r.current=null,n(!1),o.dispose()}),c=$e(l=>{if(o.dispose(),r.current===null){r.current=l.currentTarget,n(!0);{let u=Ht(l.currentTarget);o.addEventListener(u,"pointerup",d,!1),o.addEventListener(u,"pointermove",f=>{if(r.current){let h=Wt(f);n(At(h,r.current.getBoundingClientRect()))}},!1),o.addEventListener(u,"pointercancel",d,!1)}}});return{pressed:a,pressProps:t?{}:{onPointerDown:c,onPointerUp:d,onClick:d}}}let Ot=i.createContext(void 0);function It(){return i.useContext(Ot)}let Kt="button";function Gt(t,r){var a;let n=It(),{disabled:o=n||!1,autoFocus:d=!1,...c}=t,{isFocusVisible:l,focusProps:u}=Rt({autoFocus:d}),{isHovered:f,hoverProps:h}=Bt({isDisabled:o}),{pressed:p,pressProps:g}=Yt({disabled:o}),v=lt({ref:r,type:(a=c.type)!=null?a:"button",disabled:o||void 0,autoFocus:d},u,h,g),$=i.useMemo(()=>({disabled:o,hover:f,focus:l,active:p,autofocus:d}),[o,f,l,p,d]);return dt()({ourProps:v,theirProps:c,slot:$,defaultTag:Kt,name:"Button"})}let Ne=it(Gt);j.extend(mt);const O=({title:t,value:r})=>e.jsxs("div",{className:"bg-white rounded-xl border border-[#8B23ED] shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)] p-4 flex flex-col justify-center",children:[e.jsx("div",{className:"text-sm text-gray-500 text-center",children:t}),e.jsx("div",{className:"text-2xl font-bold mt-2 text-center",children:r})]}),se=({label:t,percent:r})=>e.jsxs("div",{className:"mb-3 flex justify-between border p-4 rounded-lg",children:[e.jsx("div",{className:"flex justify-between text-sm",children:e.jsx("div",{className:"text-gray-900 text-[16px] mt-2",children:t})}),e.jsxs("div",{className:"w-50 overflow-hidden",children:[e.jsxs("div",{className:"text-gray-600 flex justify-end bg-white",children:[r,"%"]}),e.jsx("div",{className:"bg-gray-300 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${r}%`}})})]})]}),Vt=t=>{switch(String(t||"").toLowerCase()){case"aktif":return"bg-green-100 text-green-700";case"draft":return"bg-orange-100 text-orange-700";case"published":return"bg-blue-100 text-blue-700";case"selesai":return"bg-purple-100 text-purple-700";case"tidak aktif":default:return"bg-gray-100 text-gray-600"}};function gr(){const{props:t}=et(),{user:r}=t,a=t.total_users??0,n=t.total_events??0,o=t.total_eskul??0,d=t.attendance_percentage??{school:"0%"},c=t.users??[],l=t.events??[],u=t.eskuls??[];t.statistik;const[f,h]=i.useState(t.rekap??[]),[p,g]=i.useState("bulan"),[v,$]=i.useState(j().month()+1),[x,E]=i.useState(j().year()),[k,R]=i.useState(1),[G,We]=i.useState(""),[Ut,me]=i.useState(!1),[F,V]=i.useState("weekly"),[U,Ae]=i.useState({sekolah:0,eskul:0,event:0}),[Ye,q]=i.useState(!1),[Oe,pe]=i.useState(!1);i.useEffect(()=>{re.get(`/api/admin/dashboard/statistik?range=${F}`).then(s=>Ae(s.data)).catch(s=>console.error("Gagal ambil statistik:",s))},[F]);const Ie=async()=>{me(!0);try{const s={filter:p,bulan:v,tahun:x,semester:k,type:"sekolah"},m=await re.get("/api/admin/rekap-kehadiran",{params:s}),b=(m.data?.data??m.data??[]).map(L=>{const te=t.rekap?.find(Ze=>Ze.id===L.murid_id);return{...L,avatar:L.avatar||te?.avatar||"/default-avatar.png"}});h(Array.isArray(b)?b:[])}catch(s){console.error("Gagal ambil rekap:",s),h([])}finally{me(!1)}};i.useEffect(()=>{Ie()},[p,v,x,k]);const he=i.useMemo(()=>{const s=G.trim().toLowerCase();return s?f.filter(m=>{const w=(m.nama||m.name||"").toString().toLowerCase(),b=(m.kelas||m.kelas_nama||"").toString().toLowerCase();return w.includes(s)||b.includes(s)}):f},[f,G]),Ke=he.slice(0,3),[y,J]=i.useState("bulanan"),[N,z]=i.useState(j()),[T,Ge]=i.useState([]),[H,Ve]=i.useState(""),[X,xe]=i.useState(j()),[Z,be]=i.useState(j()),[W,Ue]=i.useState(""),[A,qe]=i.useState(""),[_,Je]=i.useState(1),Q=5,ge=Math.ceil(T.length/Q),ve=i.useMemo(()=>{const s=(_-1)*Q;return T.slice(s,s+Q)},[T,_]),ye=s=>{z(m=>{if(y==="mingguan")return m.add(s==="prev"?-1:1,"week");if(y==="bulanan")return m.add(s==="prev"?-1:1,"month");const w=m.month()+1,b=m.year();return w>=7?s==="next"?j(`${b+1}-01-01`):j(`${b}-01-01`):s==="next"?j(`${b}-07-01`):j(`${b-1}-07-01`)})};i.useEffect(()=>{if(y==="bulanan")z(j());else if(y==="mingguan"){const s=j(),m=s.startOf("week").add(1,"day");xe(m),be(m.add(4,"day")),z(s)}},[y]),i.useEffect(()=>{let s,m;if(y==="mingguan"){const w=j().startOf("week").add(1,"day");s=w,m=w.add(4,"day")}else if(y==="bulanan")s=N.startOf("month"),m=N.endOf("month");else{const w=N.month()+1,b=N.year();w>=7?(s=j(`${b}-07-01`),m=j(`${b}-12-31`)):(s=j(`${b}-01-01`),m=j(`${b}-06-30`))}xe(s),be(m),Ue(s.format("YYYY-MM-DD")),qe(m.format("YYYY-MM-DD")),console.log("🧭 Period updated:",{mode:y,start:s.format("YYYY-MM-DD"),end:m.format("YYYY-MM-DD")})},[N,y]),i.useEffect(()=>{!W||!A||(console.log("📤 Fetching report:",{mode:y,start:W,end:A}),re.get("/api/admin/dashboard/report",{params:{range:y,start_date:W,end_date:A}}).then(s=>{console.log("📊 Data fetched:",s.data.periode),Ge(s.data.data??[])}).catch(s=>console.error("Gagal ambil report:",s)))},[W,A,y]);const ze=i.useMemo(()=>{if(y==="mingguan"){const L=X?.format("DD MMM"),te=Z?.format("DD MMM YYYY");return`${L} – ${te}`}if(y==="bulanan")return`${N.format("MMMM YYYY")}`;const s=N.month()+1,m=N.year();let w,b;return s>=7?(w=1,b=m):(w=2,b=m-1),`Semester ${w} — ${b}`},[y,N,X,Z]),ee=i.useMemo(()=>{const s=H.trim().toLowerCase();return s?T.filter(m=>(m.nama||m.name||"").toLowerCase().includes(s)):T},[T,H]),[we,Xe]=i.useState(1),je=5;return ee.length,i.useMemo(()=>{const s=(we-1)*je;return ee.slice(s,s+je)},[ee,we]),i.useEffect(()=>{Xe(1)},[y,X,Z,H,T]),e.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-800 flex flex-col",children:[e.jsx(tt,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx("aside",{className:"hidden md:block md:w-60 bg-white p-4 shadow-lg min-h-screen",children:e.jsxs("nav",{className:"space-y-2 text-sm",children:[e.jsxs("div",{onClick:()=>window.location.href="/Admin/Dashboard",className:"p-2 rounded bg-[#E86D1F] font-medium cursor-pointer text-white flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--dashboard-lineW.svg",alt:""}),"Dashboard"]}),e.jsxs("div",{onClick:()=>window.location.href="/Admin/UserManagement",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-settings-line.svg",alt:""})," User Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/events",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--list-settings-line.svg",alt:""})," Event Manajemen"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/eskul",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--user-community-line.svg",alt:""})," Ekstrakurikuler"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/riwayat-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--history-line.svg",alt:""})," Riwayat Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/statistik-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--pie-chart-2-line.svg",alt:""})," Statistik Kehadiran"]}),e.jsxs("div",{onClick:()=>window.location.href="/admin/laporan-kehadiran",className:"p-2 rounded hover:bg-gray-200 cursor-pointer flex items-center gap-2",children:[e.jsx("img",{src:"/icons/ri--file-text-line.svg",alt:""})," Laporan"]})]})}),e.jsxs("main",{className:"flex-1 overflow-x-auto p-4",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center bg-white p-2 gap-10 rounded-xl shadow border",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("img",{src:t.auth?.user?.avatar??"/images/avatar-placeholder.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}),e.jsx("div",{className:"text-[16px]",children:t.auth?.user?.name??"Admin"})]}),e.jsxs("div",{children:[e.jsx("button",{className:"p-2 rounded bg-white",children:"⚙️"}),e.jsx("button",{className:"p-2 rounded bg-white",children:"🔓"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(O,{title:"Total Siswa",value:a}),e.jsx(O,{title:"Event Aktif",value:n}),e.jsx(O,{title:"Ekstrakulikuler",value:o}),e.jsx(O,{title:"Rata-rata Kehadiran",value:d.school??"0%"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-[#8B23ED] shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"font-semibold",children:"User"}),e.jsx(rt,{})]}),e.jsxs("div",{className:"space-y-3 max-h-90 overflow-y-auto pr-2",children:[c.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Tidak ada data user"}),c.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-2 w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar?.startsWith("data:image")?s.avatar:s.avatar_path?`/storage/${s.avatar_path.replace(/^public\//,"")}`:"/default-avatar.png",alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.role??"Siswa"})]})]}),e.jsx("div",{className:"text-gray-400",children:"..."})]},s.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-[#8B23ED] shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"font-semibold",children:"Event"}),e.jsx(Ne,{onClick:()=>q(!0),className:"text-sm bg-[#8B23ED] text-white px-3 py-2 mr-2 rounded",children:"Tambah"})]}),e.jsxs("div",{className:"space-y-3 max-h-90 overflow-y-auto pr-2",children:[l.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Tidak ada event"}),l.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-2 w-full",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title||s.nama||"Event"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.start_date?new Date(s.start_date).toLocaleDateString():""," - ",s.end_date?new Date(s.end_date).toLocaleDateString():""]})]}),e.jsx("div",{className:`text-xs font-semibold px-3 py-1 rounded-full ${Vt(s.status_event)}`,children:s.status_event??"Tidak Aktif"})]},s.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-[#8B23ED] shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("div",{className:"font-semibold",children:"Ekstrakulikuler"}),e.jsx(Ne,{onClick:()=>pe(!0),className:"text-sm bg-[#8B23ED] text-white px-3 py-2 mr-2 rounded",children:"Tambah"})]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:[u.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"Tidak ada eskul"}),u.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 w-full",children:[e.jsx("div",{className:"font-medium",children:s.nama}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-xs text-white border rounded-lg bg-orange-600 p-1",children:[s.anggota_count??s.anggota??0," Anggota"]}),e.jsx("div",{children:"..."})]})]},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-[#8B23ED] h-91 shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsxs("div",{className:" items-center justify-between mb-3",children:[e.jsx("div",{className:"font-semibold text-[23px] mb-3",children:"Statistik Kehadiran"}),e.jsxs("div",{className:"space-x-2 flex gap-2 mb-5",children:[e.jsxs("div",{className:"mt-1",children:[e.jsx("img",{src:"",alt:""}),e.jsx("label",{htmlFor:"",className:"text-[16px]",children:"Filter"})]}),e.jsx("button",{onClick:()=>V("weekly"),className:`px-3 py-1 rounded border border-[#8B23ED] ${F==="weekly"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Mingguan"}),e.jsx("button",{onClick:()=>V("monthly"),className:`px-3 py-1 rounded border border-[#8B23ED] ${F==="monthly"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Bulanan"}),e.jsx("button",{onClick:()=>V("semester"),className:`px-3 py-1 rounded border border-[#8B23ED] ${F==="semester"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Semester"})]})]}),e.jsxs("div",{children:[e.jsx(se,{label:"Kehadiran sekolah",percent:Number(U.sekolah)}),e.jsx(se,{label:"Kehadiran Ekstrakulikuler",percent:Number(U.eskul)}),e.jsx(se,{label:"Kehadiran Event",percent:Number(U.event)})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow border border-[#8B23ED] p-5 shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-[23px] font-semibold mb-3",children:"Rekap Kehadiran Siswa"})}),e.jsx("div",{className:"flex flex-wrap justify-end items-center mb-4 gap-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{className:"flex items-center gap-1 bg-[#8B23ED] text-white px-3 py-1.5 rounded-lg text-[15px]",children:"⚙️ Filter"}),e.jsx("button",{onClick:()=>g("bulan"),className:`px-3 py-1.5 rounded-lg text-sm ${p==="bulan"?"bg-[#8B23ED] text-white":"border border-[#8B23ED] text-[#8B23ED]"}`,children:"Bulanan"}),e.jsx("button",{onClick:()=>g("semester"),className:`px-3 py-1.5 rounded-lg text-sm ${p==="semester"?"bg-[#8B23ED] text-white":"border border-[#8B23ED] text-[#8B23ED]"}`,children:"Semester"}),e.jsx("input",{type:"text",placeholder:"Cari",className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm",value:G,onChange:s=>We(s.target.value)})]})}),e.jsxs("div",{className:"space-y-2",children:[he.length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center",children:"Tidak ada data"}),Ke.map((s,m)=>(console.log("Rekap avatar URL:",s.avatar),e.jsxs("div",{className:"flex items-center justify-between border rounded-xl p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar||"/default-avatar.png",alt:s.nama,onError:w=>w.currentTarget.src="/default-avatar.png",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.nama}),e.jsx("div",{className:"text-xs text-gray-500",children:s.kelas})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 text-right",children:s.total??"-"}),e.jsx("div",{className:"font-semibold text-[#8B23ED]",children:s.persentase??0})]})]},m)))]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-[#8B23ED] shadow-[4.0px_4.0px_8.0px_rgba(0,0,0,0.38)]",children:[e.jsxs("div",{className:" flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-3",children:[e.jsx("div",{className:"font-semibold text-lg mb-6",children:"Report Kehadiran"}),e.jsxs("div",{className:"flex items-center gap-6 flex-wrap ",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"",alt:""}),e.jsx("label",{htmlFor:"",children:"Filter"})]}),e.jsxs("div",{className:"flex items-center m-0 gap-0",children:[e.jsx("button",{onClick:()=>ye("prev"),className:"px-2 py-1 rounded border bg-gray-100 hover:bg-gray-200",children:"◀"}),e.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[150px] text-center",children:ze}),e.jsx("button",{onClick:()=>ye("next"),className:"px-2 py-1 rounded border bg-gray-100 hover:bg-gray-200",children:"▶"})]}),e.jsx("button",{onClick:()=>J("mingguan"),className:`px-3 py-1 rounded border border-[#8B23ED] ${y==="mingguan"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Mingguan"}),e.jsx("button",{onClick:()=>J("bulanan"),className:`px-3 py-1 rounded border border-[#8B23ED] ${y==="bulanan"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Bulanan"}),e.jsx("button",{onClick:()=>J("semester"),className:`px-3 py-1 rounded border border-[#8B23ED] ${y==="semester"?"bg-[#8B23ED] text-white":"bg-gray-100"}`,children:"Semester"}),e.jsx("input",{value:H,onChange:s=>Ve(s.target.value),placeholder:"cari",className:"border rounded px-3 py-2 text-sm"}),e.jsx("button",{className:"px-3 py-2 bg-green-500 text-white rounded",children:"Download Report"})]})]}),e.jsxs("div",{className:"overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 border-b border-t ",children:[e.jsx("th",{className:"py-2 pr-4",children:"No"}),e.jsx("th",{className:"py-2 pr-4",children:"Nama"}),e.jsx("th",{className:"py-2 pr-4",children:"Kelas"}),e.jsx("th",{className:"py-2 pr-4",children:"Kejuruan"}),e.jsx("th",{className:"py-2 pr-4",children:"Jumlah Hadir Sekolah"}),e.jsx("th",{className:"py-2 pr-4",children:"Jumlah Hadir Ekstrakulikuler"}),e.jsx("th",{className:"py-2 pr-4",children:"Jumlah Hadir Event"}),e.jsx("th",{className:"py-2 pr-4",children:"Total Kehadiran"}),e.jsx("th",{className:"py-2 pr-4",children:"Keterangan"})]})}),e.jsx("tbody",{children:ve.length>0?ve.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 pr-4",children:s.no}),e.jsx("td",{className:"py-3 pr-4",children:s.nama}),e.jsx("td",{className:"py-3 pr-4",children:s.kelas}),e.jsx("td",{className:"py-3 pr-4",children:s.keahlian}),e.jsx("td",{className:"py-3 pr-4",children:s.hadir_sekolah}),e.jsx("td",{className:"py-3 pr-4",children:s.hadir_ekskul}),e.jsx("td",{className:"py-3 pr-4",children:s.hadir_event}),e.jsx("td",{className:"py-3 pr-4",children:s.total}),e.jsx("td",{className:"py-3 pr-4",children:s.keterangan})]},s.murid_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center py-3",children:"Tidak ada data"})})})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("div",{className:"flex items-center gap-2 border rounded-full px-3 py-1 bg-white shadow-sm",children:Array.from({length:ge},(s,m)=>m+1).filter(s=>s===1||s===ge||s>=_-2&&s<=_+2).map((s,m,w)=>{const b=w[m-1],L=b&&s-b>1;return e.jsxs(ce.Fragment,{children:[L&&e.jsx("span",{className:"px-2 text-gray-400",children:"…"}),e.jsx("button",{onClick:()=>Je(s),className:`px-3 py-1.5 rounded-full transition-all duration-150 ${_===s?"bg-orange-400 text-white":"text-gray-700 hover:bg-gray-100"}`,children:s})]},s)})})})]})]})]})]}),Ye&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-[800px] max-h-[90vh] overflow-y-auto p-6 relative",children:[e.jsx("button",{onClick:()=>q(!1),className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-xl",children:"✕"}),e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tambah Event Baru"}),e.jsx(at,{onClose:()=>q(!1)})]})}),Oe&&e.jsx(st,{onClose:()=>pe(!1)})]})}export{gr as default};
