import{u as g,r,d as f,j as e,H as b,L as j}from"./app-Db-aw5MQ.js";import{A as N}from"./AuthenticatedLayout-CS7Tii-L.js";import{B as k}from"./BottomNavbar-CPs9VJ6F.js";import{B as w}from"./button-CTj6SyfF.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./utils-NikRBbYi.js";function P(){const m=g().props,{auth:a,eskul:o,absensiHariIni:u}=m,[n,c]=r.useState(null);r.useEffect(()=>{const t=JSON.parse(localStorage.getItem("user")||"{}");t&&t.id?c(t):c({id:a.user.id,nama:a.user.name,email:a.user.email,foto:a.user.foto||"/default-avatar.png",kelas:a.user.kelas||{id:0,name:"Kelas"}})},[a]);const[x,S]=r.useState("list"),[_,y]=r.useState(null),[A,D]=r.useState(null),{data:H,setData:E}=f({absensi_eskul_id:"",foto:null}),h=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];return e.jsxs(N,{user:a.user,children:[e.jsx(b,{title:"Absensi Eskul"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("img",{src:n?.avatar||"/default-avatar.png",alt:"Profile",className:"w-14 h-14 rounded-full object-cover border"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-600",children:n?.nama||a.user.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n?.kelas?.name||a.user.kelas?.name||"Kelas"})]})]}),x==="list"&&e.jsx("div",{className:"flex flex-col gap-4",children:o.length===0?e.jsx("div",{className:"bg-white rounded-xl p-6 shadow",children:e.jsx("p",{children:"Anda belum terdaftar di eskul apapun."})}):(()=>{const t=o.filter(i=>u.some(d=>d.eskul_id===i.id));return t.length===0?e.jsx("div",{className:"bg-white rounded-xl p-6 shadow",children:e.jsx("p",{children:"Tidak ada absensi eskul hari ini."})}):t.map(i=>{const d=u.filter(s=>s.eskul_id===i.id);return e.jsxs("div",{className:"bg-purple-400 text-white rounded-xl p-4 shadow",children:[e.jsx("h2",{className:"font-semibold text-lg mb-3",children:i.nama}),d.map(s=>{const p=s.kehadiran.some(l=>l.user_id===a.user.id&&l.tanggal===new Date().toISOString().split("T")[0]);return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Jadwal"}),e.jsx("p",{className:"text-sm",children:s.tanggal?new Date(s.tanggal).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):`Hari ${s.day_of_week!==null?h[s.day_of_week]:"-"}`})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Waktu"}),e.jsxs("p",{className:"text-sm",children:[s.jam_mulai," - ",s.jam_selesai]})]}),p?e.jsx("div",{className:"w-full text-center py-2 rounded font-semibold text-white",children:s.kehadiran.some(l=>l.user_id===a.user.id&&l.tanggal===new Date().toISOString().split("T")[0]&&l.status==="Tidak Hadir")?e.jsx("div",{className:"w-full text-center py-2 rounded font-semibold bg-red-500 rounded-lg ",children:"Tidak Hadir"}):e.jsx("div",{className:"w-full text-center py-2 rounded font-semibold bg-green-500 rounded-lg",children:"Hadir"})}):e.jsx(j,{href:route("murid.eskul.kehadiran",s.id),children:e.jsx(w,{className:"w-full bg-orange-500 hover:bg-orange-600",children:"Isi Absen"})})]},s.id)})]},i.id)})})()})]}),e.jsx(k,{})]})}export{P as default};
