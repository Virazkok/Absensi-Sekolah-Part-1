import{r,a as l,j as e,b as g}from"./app-Db-aw5MQ.js";/* empty css            */l.defaults.withCredentials=!0;l.defaults.baseURL="http://127.0.0.1:8000";const v=({mode:a="in"})=>{const[o,c]=r.useState(null),[j,p]=r.useState(!1),[m,u]=r.useState(""),[n,f]=r.useState(""),[h,i]=r.useState(20),d=()=>{g.reload({only:["qrCode"],onSuccess:s=>{const t=s.props;f(t.qrCode),i(20)},onError:()=>console.error("gagal fetch QR")})};return r.useEffect(()=>{d();let s,t;return(()=>{t=setInterval(()=>{d()},2e4),s=setInterval(()=>{i(x=>x===0?20:x-1)},1e3)})(),()=>{clearInterval(s),clearInterval(t)}},[]),r.useEffect(()=>{const s=JSON.parse(localStorage.getItem("user")||"{}");s&&s.id?(console.log("ðŸ“¦ User dari localStorage:",s),c(s)):l.get("/api/student/me").then(t=>{c(t.data),localStorage.setItem("user",JSON.stringify(t.data))}).catch(t=>{console.error("Gagal fetch user",t)})},[]),r.useEffect(()=>{const t=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});u(t)},[a]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 px-6 pt-10 pb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mt-4",children:a==="in"?"Check In":"Check Out"}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-sm text-center",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-gray-300 shadow",children:e.jsx("img",{src:o?.avatar||"/default-avatar.png",alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:o?.name||"Nama Siswa"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Hari ini, ",a==="in"?"check in":"check out"," jam ",m]})]})]}),e.jsx("br",{})," ",e.jsx("br",{}),e.jsx("div",{className:"rounded-2xl shadow-md bg-white flex items-center justify-center mb-3 py-6",children:e.jsx("div",{className:"w-40 h-40 bg-gray-200 flex items-center justify-center text-gray-500",children:n?e.jsx("div",{className:"flex justify-center",dangerouslySetInnerHTML:{__html:n}},n):e.jsx("p",{className:"text-center text-red-500",children:"QR Code tidak tersedia"})})}),e.jsx("br",{})," ",e.jsx("br",{}),e.jsxs("p",{className:"mt-2 text-center font-bold text-indigo-600",children:["Refreshing in ",h,"s"]}),e.jsx("p",{className:"mt-1 text-center text-sm text-gray-600",children:"Tunjukkan QR Code ini saat absensi"})]})}),e.jsx("button",{onClick:()=>window.location.href="/murid/home",className:"mt-6 py-2 border border-orange-500 text-orange-500 rounded-lg font-medium",children:"Selesai"})]})};export{v as default};
